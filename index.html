<html>
<style>
    html,
    body {
        width: 100%;
        height: 100%;
        padding: 0;
        margin: 0;
        overflow: hidden;
        font-family: Helvetica;
    }

    #tree {
        width: 100%;
        height: 100%;
    }
</style>

<body>
    <!-- <script src="https://balkan.app/js/familytree.js"></script> -->
    <script src="/familytree.js"></script>
    <div id="tree" />
    <script>
        var family = new FamilyTree(document.getElementById("tree"), {
            // scaleInitial: FamilyTree.match.boundary,
            menu: {
                pdf: { text: "Export PDF" },
                png: { text: "Export PNG" },
                svg: { text: "Export SVG" },
                csv: { text: "Export CSV" },
                json: { text: "Export JSON" }
            },
            mouseScrool: FamilyTree.action.ctrlZoom,
            mode: 'dark',
            template: 'hugo',
            nodeBinding: {
                field_0: "name",
                field_1: 'born',
                img_0: 'photo'
            },
            // roots: [4100],
            // orderBy: "orderId",
            nodeMenu: {
                edit: { text: 'Edit' },
                details: { text: 'Details' },
                remove: {
                    text: "Remove", onClick: function (sender, args) {
                        console.log('Remove Id:' + sender + "      " + args);
                        // family.remove(sender);
                    }
                },
            },
            nodeTreeMenu: true,
            editForm: {
                titleBinding: "name",
                photoBinding: "photo",
                addMoreBtn: 'Add element',
                addMore: 'Add more elements',
                addMoreFieldName: 'Element name',
                generateElementsFromFields: false,
                elements: [
                    { type: 'textbox', label: 'Tên', binding: 'name' },
                    { type: 'textbox', label: 'Địa Chỉ', binding: 'email' },
                    [
                        { type: 'textbox', label: 'Điện Thoại', binding: 'phone' },
                        { type: 'date', label: 'Năm Sinh', binding: 'born' }
                    ],
                    [
                        { type: 'select', options: [{ value: 'bg', text: 'Việt Nam' }], label: 'Nguyên quán', binding: 'country' },
                        { type: 'textbox', label: 'Tỉnh/Thành Phố', binding: 'city' },
                    ],
                    { type: 'textbox', label: 'Đường dẫn ảnh/url', binding: 'photo', btn: 'Tải lên', value: "https://www.w3schools.com/howto/img_avatar.png" },
                ]
            },
            // Data storage
            // state: {
            // name: 'MyFamilyTree',
            // readFromLocalStorage: true,
            // writeToLocalStorage: true,
            // readFromIndexedDB: true,
            // writeToIndexedDB: true,
            // readFromUrlParams: true,
            // writeToUrlParams: true
            // },
        });

        // family.on('field', function (sender, args) {
        //     if (args.name == 'born') {
        //         var date = new Date(args.value);
        //         // args.value = date.toLocaleDateString();
        //     }
        // });

        family.load(
            [
                { id: 1, pids: [3], gender: 'male', photo: 'https://cdn.balkan.app/shared/m60/2.jpg', name: 'Zeph Daniels', born: '1954-09-29' },
                { id: 2, pids: [3], gender: 'male', photo: 'https://cdn.balkan.app/shared/m60/1.jpg', name: 'Rowan Annable', born: '1952-10-10' },
                { id: 3, pids: [1, 2], gender: 'female', photo: 'https://cdn.balkan.app/shared/w60/1.jpg', name: 'Laura Shepherd', born: '1943-01-13', email: 'laura.shepherd@gmail.com', phone: '+44 845 5752 547', city: 'Moscow', country: 'ru' },
                { id: 4, pids: [5], photo: 'https://cdn.balkan.app/shared/m60/3.jpg', name: 'Rowan Annable' },
                { id: 5, pids: [4], gender: 'female', photo: 'https://cdn.balkan.app/shared/w60/3.jpg', name: 'Lois Sowle' },
                { id: 6, mid: 2, fid: 3, pids: [7], gender: 'female', photo: 'https://cdn.balkan.app/shared/w30/1.jpg', name: 'Tyler Heath', born: '1975-11-12' },
                { id: 7, pids: [6], mid: 5, fid: 4, gender: 'male', photo: 'https://cdn.balkan.app/shared/m30/3.jpg', name: 'Samson Stokes', born: '1986-10-01' },
                { id: 8, mid: 7, fid: 6, gender: 'female', photo: 'https://cdn.balkan.app/shared/w10/3.jpg', name: 'Celeste Castillo', born: '2021-02-01' }

            ]
        );


    </script>
</body>

</html>